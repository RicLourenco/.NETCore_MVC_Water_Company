@model NETCore_MVC_Water_Company.Web.Data.Entities.WaterMeter

@{
    ViewData["Title"] = "Details";
}

<h2>Details</h2>

<div>
    <h4>WaterMeter</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Address)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Address)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.TotalConsumption)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.TotalConsumption)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.MeterState)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.MeterState)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.City.Name)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.City.Name)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.ZipCode)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.ZipCode)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.CreationDate)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.CreationDate)
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
    <a asp-action="CreateBill" asp-route-id="@Model.Id">Create new bill</a>

    <a asp-action="Index">Back to List</a>
</div>

<ejs-chart id="consumptionChart">
    <e-chart-primaryxaxis valueType="Category">
    </e-chart-primaryxaxis>
    <e-series-collection>
        <e-series name="Consumption" xName="xValue" yName="yValue" dataSource="@Model.ChartData" 
                  type="@Syncfusion.EJ2.Charts.ChartSeriesType.Line">
        </e-series>
    </e-series-collection>
</ejs-chart>

<h4>Bills</h4>
@if (Model.Bills == null | Model.Bills.Count == 0)
{
    <h5>No bills</h5>
}
else
{
    <table class="table">
        <thead>
            <tr>
                Bill list
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Bills.OrderBy(c => c.MonthYear))
            {
            <tr>
                <th>
                    @Html.DisplayNameFor(modelItem => item.Id)
                </th>
                <th>
                    @Html.DisplayFor(modelItem => item.Id)
                </th>
                <td>
                    @Html.DisplayNameFor(modelItem => item.PaymentState)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PaymentState)
                </td>
                <td>
                    @Html.DisplayNameFor(modelItem => item.Consumption)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Consumption)
                </td>
                <td>
                    @Html.DisplayNameFor(modelItem => item.FinalValue)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FinalValue)
                </td>
                <td>
                    @Html.DisplayNameFor(modelItem => item.MonthYear)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MonthYear)
                </td>
                <td id="@item.Id">
                    <a asp-action="EditBill" asp-route-id="@item.Id" class="btn btn-warning">Edit</a>
                    <a asp-action="DeleteBill" asp-route-id="@item.Id" class="btn btn-danger" id="btnDelete">Delete</a>
                </td>
            </tr>
            }
        </tbody>
    </table>
}
